# TodoLog 開発ガイド

## 開発方針

TodoLogは、TypeScriptとReactを使用した最新のベストプラクティスに従って開発します。このガイドでは、開発プロセス、コーディング規約、およびプロジェクト管理の方針について説明します。

## 開発プロセス

### 1. 機能開発のワークフロー

1. **要件定義**
   - 機能の目的と範囲を明確にする
   - ユーザーストーリーを作成する
   - 受け入れ基準を定義する

2. **設計**
   - コンポーネント設計
   - データフローの計画
   - 必要な型定義の検討

3. **実装**
   - テスト駆動開発（TDD）の実践
   - 型安全なコードの作成
   - コンポーネントの責任分離

4. **テスト**
   - 単体テスト
   - 統合テスト
   - 手動テスト

5. **レビュー**
   - コードレビュー
   - 品質チェック（型チェック、リント）
   - パフォーマンス確認

6. **リリース**
   - ビルドと検証
   - デプロイ
   - フィードバック収集

### 2. ブランチ戦略

- `main`: 安定版ブランチ
- `develop`: 開発ブランチ
- `feature/*`: 機能開発ブランチ
- `bugfix/*`: バグ修正ブランチ
- `release/*`: リリース準備ブランチ

### 3. コミット規約

コミットメッセージは以下の形式に従います：

```
<type>(<scope>): <subject>

<body>

<footer>
```

- **type**: feat, fix, docs, style, refactor, test, chore など
- **scope**: 変更の範囲（コンポーネント名など）
- **subject**: 変更内容の簡潔な説明
- **body**: 詳細な説明（省略可）
- **footer**: 関連するIssue番号など（省略可）

例：
```
feat(TaskList): タスクのフィルタリング機能を追加

- カテゴリによるフィルタリング
- 優先度によるフィルタリング
- 完了状態によるフィルタリング

Closes #42
```

## コーディング規約

### 1. TypeScript

- 厳格なnull/undefined チェックを有効化（`strictNullChecks: true`）
- any型の使用を避け、unknown型を適切に使用
- 関数の引数と戻り値に型アノテーションを付ける
- インターフェースと型エイリアスを適切に使い分ける
- ジェネリクスを活用して再利用可能なコードを作成

### 2. React

- 関数コンポーネントとReact Hooksを使用
- Propsには適切な型定義を行う
- コンポーネントの責任を明確に分離
- メモ化（React.memo, useMemo, useCallback）を適切に使用
- 副作用の管理にはuseEffectを使用し、依存配列を適切に設定

### 3. ファイル構成

- 関連するファイルをフィーチャーごとにグループ化
- コンポーネントは単一責任の原則に従って分割
- 共通のユーティリティ関数は適切に抽象化
- テストファイルはテスト対象のファイルと同じディレクトリに配置

### 4. 命名規則

- **コンポーネント**: PascalCase（例: TaskList）
- **関数**: camelCase（例: addTask）
- **変数**: camelCase（例: taskList）
- **定数**: UPPER_SNAKE_CASE（例: MAX_TASKS）
- **インターフェース**: PascalCase（例: Task）
- **型エイリアス**: PascalCase（例: TaskFilter）
- **ファイル名**: コンポーネントと同じ名前（例: TaskList.tsx）

## テスト戦略

### 1. 単体テスト

- 各コンポーネントの基本機能をテスト
- カスタムフックの動作確認
- ユーティリティ関数のテスト
- モックを活用して外部依存を分離

### 2. 統合テスト

- コンポーネント間の連携テスト
- データフローのテスト
- ユーザーインタラクションのテスト

### 3. E2Eテスト

- 主要なユーザーフローのテスト
- エッジケースのテスト
- パフォーマンステスト

## パフォーマンス最適化

### 1. レンダリングの最適化

- 不要な再レンダリングを防ぐためのメモ化
- 大きなリストには仮想化を適用
- コンポーネントの適切な分割

### 2. データ管理の最適化

- 効率的な状態更新
- 必要なデータのみをコンポーネントに渡す
- ローカルストレージの効率的な使用

### 3. ビルドの最適化

- コード分割（Code Splitting）
- 遅延ロード（Lazy Loading）
- 不要なライブラリの削除

## アクセシビリティ

- セマンティックなHTML要素の使用
- キーボードナビゲーションのサポート
- スクリーンリーダー対応
- 十分なコントラスト比の確保
- フォーカス管理の適切な実装

## セキュリティ

- ユーザー入力のバリデーションとサニタイズ
- 安全なデータ保存
- 依存パッケージの定期的な更新
- 脆弱性スキャンの実施

## 継続的インテグレーション/デリバリー

- プルリクエスト時の自動テスト
- 型チェックとリントの自動実行
- ビルドの自動化
- デプロイの自動化

## 開発環境のセットアップ

### 必要なツール

- Node.js (最新のLTS版)
- npm または yarn
- Git
- VSCode（推奨エディタ）

### 推奨VSCode拡張機能

- ESLint
- Prettier
- TypeScript Hero
- Jest
- React Developer Tools

### 開発環境の構築手順

```bash
# リポジトリのクローン
git clone https://github.com/your-username/todolog.git
cd todolog

# 依存関係のインストール
npm install

# 開発サーバーの起動
npm run dev

# テストの実行
npm test

# ビルド
npm run build
```

## トラブルシューティング

### 一般的な問題と解決策

1. **型エラー**
   - TypeScriptの型定義を確認
   - 必要に応じて型アサーションを使用

2. **パフォーマンスの問題**
   - React DevToolsのProfilerを使用して原因を特定
   - メモ化の適用
   - 不要なレンダリングの削減

3. **テストの失敗**
   - テストケースの期待値と実際の値を確認
   - モックの設定を確認
   - 非同期テストの適切な処理

## 参考リソース

- [React 公式ドキュメント](https://reactjs.org/docs/getting-started.html)
- [TypeScript 公式ドキュメント](https://www.typescriptlang.org/docs/)
- [Vite 公式ドキュメント](https://vitejs.dev/guide/)
- [Biome 公式ドキュメント](https://biomejs.dev/guides/)
- [Vitest 公式ドキュメント](https://vitest.dev/guide/)
- [React Testing Library](https://testing-library.com/docs/react-testing-library/intro/)
